<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Focus Fuel</title>
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#007bff" />

  <link rel="stylesheet" href="dashboard.css" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css?v=1" rel="stylesheet">
  <meta name="mobile-web-app-capable" content="yes">

</head>
<body>
  <!-- Animated Background -->
  <div class="background-overlay"></div>
  <div class="floating-shapes">
    <div class="shape shape-1"></div>
    <div class="shape shape-2"></div>
    <div class="shape shape-3"></div>
    <div class="shape shape-4"></div>
    <div class="shape shape-5"></div>
  </div>

  <div class="dashboard-container">
    <!-- Header Section -->
    <header class="dashboard-header">
      <div class="header-content">
        <div class="logo-section">
          <div class="logo-icon">
            <i class="fa-solid fa-leaf"></i>

          </div>
          <div class="header-text">
            <h1>Focus Fuel</h1>
            <p class="tagline">Elevate your focus, achieve your goals</p>
          </div>
        </div>
       
      </div>
    </header>
    <!-- ✅ Hamburger Navbar START -->
    <nav class="navbar">
      <div class="hamburger" id="hamburger">&#9776;</div>
      <div class="nav-menu" id="nav-menu">
        <ul>
          <li class="user-info">
            <span>Logged in as:</span><br />
            <span id="user-email"></span><br />
            <button onclick="logout()" class="logout-btn">Logout</button>
          </li>
          <!-- Add more menu items below -->
        </ul>
      </div>
    </nav>



    <!-- Main Dashboard Grid -->
    <div class="dashboard-grid">
      <!-- Pomodoro Card -->
      <a href="pomo.html" class="dashboard-card-link">
        <div class="dashboard-card pomodoro-card">
          <div class="card-header">
            <div class="card-icon"><i class="fas fa-clock"></i></div>
            <div class="card-badge">Popular</div>
          </div>
          <div class="card-content">
            <h2>Pomodoro Focus</h2>
            <p>Boost productivity with 25-minute focused work sessions and strategic breaks.</p>
          </div>
        </div>
      </a>

      <!-- Focus Fuel Card -->
      <a href="focus.html" class="dashboard-card-link">
        <div class="dashboard-card focus-card">
          <div class="card-header">
            <div class="card-icon"><i class="fas fa-brain"></i></div>
            <div class="card-status active"></div>
          </div>
          <div class="card-content">
            <h2>Focus Fuel</h2>
            <p>Daily mindfulness practices and productivity mantras to enhance concentration.</p>
          </div>
        </div>
      </a>

      <!-- Habit Tracker Card -->
      <a href="habit.html" class="dashboard-card-link">
        <div class="dashboard-card habit-card">
          <div class="card-header">
            <div class="card-icon"><i class="fas fa-chart-line"></i></div>
          </div>
          <div class="card-content">
            <h2>Habit Tracker</h2>
            <p>Build consistency and track your daily habits with visual progress indicators.</p>
          </div>
        </div>
      </a>

      <!-- Breathing Exercise Card -->
      <a href="breath.html" class="dashboard-card-link">
        <div class="dashboard-card breathing-card">
          <div class="card-header">
            <div class="card-icon breathing-icon"><i class="fas fa-leaf"></i></div>
          </div>
          <div class="card-content">
            <h2>Breathing Exercise</h2>
            <p>Reduce stress and improve focus with guided breathing techniques.</p>
          </div>
          <div class="card-footer">
            <button class="breathing-btn"><i class="fas fa-play"></i> Start Session</button>
          </div>
        </div>
      </a>

      <!-- Challenge Card -->
      <a href="challenge.html" class="dashboard-card-link">
        <div class="dashboard-card challenge-card">
          <div class="card-header">
            <div class="card-icon"><i class="fas fa-trophy"></i></div>
            <div class="difficulty-badge">Medium</div>
          </div>
          <div class="card-content">
            <h2>Daily Challenge</h2>
            <p>Push your limits with personalized challenges and track your progress.</p>
          </div>
        </div>
      </a>
    </div>

    <!-- Footer -->
    <footer class="dashboard-footer">
      <p>&copy; Focus Fuel. Track yourself.</p>
    </footer>
  </div>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

  <script>
    // Firebase Config
    const firebaseConfig = {
      apiKey: "AIzaSyDoWm21fIjIMM7jSI9ijA2YjvBNKsZacl8",
      authDomain: "focusfuel-c4eec.firebaseapp.com",
      projectId: "focusfuel-c4eec",
      storageBucket: "focusfuel-c4eec.appspot.com",
      messagingSenderId: "325140276155",
      appId: "1:325140276155:web:9f542aece9ac6e41685a9e"
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();

    auth.onAuthStateChanged(async user => {
      const isGuest = localStorage.getItem("isGuest") === "true";

      if (!user && !isGuest) {
        window.location.href = "login.html";
        return;
      }

      if (isGuest) {
        document.getElementById("user-email").textContent = "Guest User";
        console.log("Accessing as Guest");

        const userInfo = document.querySelector(".user-info");

        if (userInfo) {
          const notice = document.createElement("p");
          notice.textContent = "⚠ You are in Guest Mode. Progress won't be saved.";
          notice.style.color = "orange";
          notice.style.fontWeight = "bold";
          notice.style.marginTop = "10px";
          userInfo.appendChild(notice);
        }

        return;
      }


      // Logged-in user
      document.getElementById("user-email").textContent = user.email;
      console.log("Logged in as:", user.email);

      const userRef = db.collection("users").doc(user.uid);
      const userDoc = await userRef.get();

      if (userDoc.exists) {
        const data = userDoc.data();
        const pomoData = data.pomodoro || {};
        const sessionsToday = pomoData.todayCount || 0;
        const streak = pomoData.streak || 0;
        const maxDailySessions = 5;

        const streakElement = document.querySelector(".header-stats .stat-item:nth-child(3) .stat-number");
        if (streakElement) {
          streakElement.textContent = streak;
        }

        const progressBar = document.querySelector(".progress-bar");
        const progressText = document.querySelector(".progress-text");
        const percent = Math.min((sessionsToday / maxDailySessions) * 100, 100);

        if (progressBar && progressText) {
          progressBar.style.width = `${percent}%`;
          progressText.textContent = `${sessionsToday}/${maxDailySessions} sessions today`;
        }

        console.log("Pomodoro Stats:", { sessionsToday, streak });
      }
    });

    function logout() {
      localStorage.removeItem("isGuest");
      auth.signOut().then(() => {
        window.location.href = "login.html";
      });
    }

    document.addEventListener('DOMContentLoaded', function () {
      const cards = document.querySelectorAll('.dashboard-card');
      cards.forEach((card, index) => {
        card.style.animationDelay = `${index * 0.1}s`;
        card.classList.add('fade-in');
      });

      const breathingIcon = document.querySelector('.breathing-icon');
      if (breathingIcon) {
        setInterval(() => {
          breathingIcon.style.transform = 'scale(1.1)';
          setTimeout(() => {
            breathingIcon.style.transform = 'scale(1)';
          }, 1000);
        }, 2000);
      }

      const shapes = document.querySelectorAll('.shape');
      shapes.forEach(shape => {
        const duration = Math.random() * 20 + 10;
        const delay = Math.random() * 5;
        shape.style.animationDuration = `${duration}s`;
        shape.style.animationDelay = `${delay}s`;
      });
    });
    
  </script>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      // Existing animations...

      // Add this: navbar toggle functionality
      const hamburger = document.getElementById('hamburger');
      const navMenu = document.getElementById('nav-menu');

      hamburger.addEventListener('click', () => {
        navMenu.classList.toggle('active');
      });
    });
  </script>
    <!-- Other scripts above -->






</body>
</html>
